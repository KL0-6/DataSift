# üõ†Ô∏è /datasift-p2p-incomingAPI

This endpoint provides an API to scrape a website and return the extracted data. It uses Puppeteer for headless browsing, processes the HTML content, and categorizes the data if required. 

## Overview üåê

The `/datasift-p2p-incomingAPI` route allows users to scrape data from a specified website. It supports both required and optional query parameters to customize the scraping process and manage different use cases.

## Request üì°

### HTTP Method

`GET`

### Request URL

`/datasift-p2p-incomingAPI`

### Query Parameters

#### Required Parameters üîë

- **`url_to_scrape`** (required): The URL of the website you want to scrape. This parameter specifies which website to load and scrape.
- **`token`** (required): Authentication token to authorize the request. This token ensures that only authorized users can access the API.

#### Optional Parameters ‚öôÔ∏è

- **`timeout`**: Specifies the maximum time in seconds to wait for the page to load before aborting the request. This helps manage cases where the page might be slow to load.
  - **Example**: `timeout=30` (waits up to 30 seconds)

- **`waitBeforeScraping`**: Indicates the amount of time in seconds to wait after the page has loaded before starting the scraping process. This can be useful to ensure that dynamic content has fully loaded.
  - **Example**: `waitBeforeScraping=5` (waits 5 seconds before scraping)

- **`shouldCategorize`**: A boolean flag indicating whether to categorize the website data using the language model. Set to `true` to enable categorization, or `false` to skip it.
  - **Example**: `shouldCategorize=true`

## Response Fields üìä

When the request is successful, the API returns a JSON object with the following fields:

### Fields

- **`defaultDatasetId`**:
  - **Type**: `string`
  - **Description**: A unique identifier for the dataset generated by the API. This ID is used to reference the scraped data and is stored in our database. You can retrive the data again using this ID, or delete it from our database.

- **`html_content`**:
  - **Type**: `string`
  - **Description**: The raw HTML content of the scraped web page. This field contains the complete HTML markup of the page as retrieved from the `url_to_scrape`. It includes all tags, attributes, and content from the page.

- **`markdown_content`**
  - **Type**: `string`
  - **Description**: The content of the web page converted into markdown format. This field is only included if the `format` parameter is set to `markdown`. It provides a markdown representation of the page's content.

- **`url`**
  - **Type**: `string`
  - **Description**: The URL of the scraped web page. This field is included if the `includeMetadata` parameter is set to `true`.

- **`category`** (if `shouldCategorize=true` is specified):
  - **Type**: `string` or `null`
  - **Description**: The category assigned to the web page by the language model. This field is included if the `shouldCategorize` parameter is set to `true`. It is `null` if `shouldCategorize` is set to `false`.

### Example Request üìù

```bash
curl -G 'http://yourdomain.com/datasift-p2p-incomingAPI' \
     --data-urlencode 'url_to_scrape=https://example.com' \
     --data-urlencode 'token=your_auth_token' \
     --data-urlencode 'timeout=30' \
     --data-urlencode 'waitBeforeScraping=5' \
     --data-urlencode 'shouldCategorize=true'
